<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒØ£Ù†Ùƒ ÙÙŠÙ‡Ø§ - Ù…ØªØ¬Ø± Ø§Ù„Ù‡ÙˆØ¯ÙŠÙ‡Ø§Øª Ø§Ù„ÙÙ„Ø³Ø·ÙŠÙ†ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        :root {
            --primary-black: #000000;
            --primary-yellow: #C8D400;
            --primary-white: #FFFFFF;
            --gray-bg: #F5F5F5;
            --gray-text: #666666;
            --border-color: #E5E5E5;
        }

        [data-theme="dark"] {
            --primary-black: #FFFFFF;
            --primary-yellow: #C8D400;
            --primary-white: #1A1A1A;
            --gray-bg: #0A0A0A;
            --gray-text: #AAAAAA;
            --border-color: #333333;
        }

        body {
            background: var(--gray-bg);
            color: var(--primary-black);
            min-height: 100vh;
        }

        /* Header */
        .header-nav {
            background: var(--primary-white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] .header-nav {
            background: #1A1A1A;
            box-shadow: 0 2px 10px rgba(255,255,255,0.05);
        }

        .logo-img {
            height: 50px;
            width: auto;
            filter: brightness(1);
        }

        [data-theme="dark"] .logo-img {
            filter: brightness(0) invert(1);
        }

        /* City Section */
        .city-section {
            background: var(--primary-white);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.08);
        }

        [data-theme="dark"] .city-section {
            background: #1A1A1A;
            box-shadow: 0 2px 15px rgba(255,255,255,0.05);
        }

        .city-title {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-black);
            border-bottom: 4px solid var(--primary-yellow);
            display: inline-block;
            padding-bottom: 8px;
            margin-bottom: 25px;
        }

        /* Product Card */
        .product-card {
            background: var(--primary-white);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 2px solid var(--border-color);
            height: 100%;
        }

        [data-theme="dark"] .product-card {
            background: #1A1A1A;
            border-color: #333;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-color: var(--primary-yellow);
        }

        [data-theme="dark"] .product-card:hover {
            box-shadow: 0 10px 25px rgba(255,255,255,0.1);
        }

        .product-image {
            width: 100%;
            height: 280px;
            object-fit: cover;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary-black);
            margin-bottom: 8px;
        }

        .product-desc {
            font-size: 0.85rem;
            color: var(--gray-text);
            margin-bottom: 12px;
        }

        /* Buttons */
        .btn-yellow {
            background: var(--primary-yellow);
            color: #000;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.9rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }

        .btn-yellow:hover {
            background: #b3bf00;
            transform: translateY(-2px);
        }

        .btn-black {
            background: var(--primary-black);
            color: var(--primary-white);
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-black:hover {
            opacity: 0.8;
        }

        /* Color Options */
        .color-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-btn:hover,
        .color-btn.active {
            transform: scale(1.15);
            border-color: var(--primary-yellow);
            border-width: 3px;
        }

        /* Size Selector */
        .size-btn {
            padding: 6px 12px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            background: var(--primary-white);
            color: var(--primary-black);
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        [data-theme="dark"] .size-btn {
            background: #0A0A0A;
        }

        .size-btn:hover,
        .size-btn.active {
            background: var(--primary-yellow);
            border-color: var(--primary-yellow);
            color: #000;
        }

        /* Package Badge */
        .package-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary-yellow);
            color: #000;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            z-index: 10;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--primary-white);
            border-radius: 15px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        /* Search Bar */
        .search-bar {
            background: var(--primary-white);
            border: 2px solid var(--border-color);
            border-radius: 25px;
            padding: 10px 20px;
            width: 100%;
            max-width: 400px;
            font-size: 0.9rem;
            color: var(--primary-black);
        }

        [data-theme="dark"] .search-bar {
            background: #0A0A0A;
        }

        .search-bar:focus {
            outline: none;
            border-color: var(--primary-yellow);
        }

        /* Cart Badge */
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--primary-yellow);
            color: #000;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
        }

        /* Hero Section */
        .hero-section {
            background: var(--primary-black);
            color: var(--primary-white);
            padding: 80px 20px;
            text-align: center;
        }

        [data-theme="dark"] .hero-section {
            background: #0A0A0A;
        }

        /* Language & Theme Switcher */
        .switcher-btn {
            background: var(--primary-white);
            color: var(--primary-black);
            border: 2px solid var(--border-color);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        [data-theme="dark"] .switcher-btn {
            background: #1A1A1A;
        }

        .switcher-btn:hover {
            border-color: var(--primary-yellow);
            background: var(--primary-yellow);
            color: #000;
        }

        /* Nav Links */
        .nav-link {
            color: var(--primary-black);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .nav-link:hover {
            background: var(--primary-yellow);
            color: #000;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header-nav sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between py-3">
                <!-- Logo -->
                <div class="flex items-center gap-4">
                    <img src="/mnt/user-data/uploads/ÙƒØ£Ù†Ùƒ_ÙÙŠÙ‡Ø§__22_-02.png" alt="ÙƒØ£Ù†Ùƒ ÙÙŠÙ‡Ø§" class="logo-img">
                </div>

                <!-- Search -->
                <div class="hidden md:block flex-1 mx-8">
                    <input type="text" id="searchInput" class="search-bar" 
                           placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø£Ùˆ Ø§Ù„Ù…Ù†ØªØ¬...">
                </div>

                <!-- Navigation -->
                <nav class="flex items-center gap-3">
                    <!-- Language Switcher -->
                    <button onclick="toggleLanguage()" class="switcher-btn" id="langBtn">
                        EN
                    </button>

                    <!-- Theme Switcher -->
                    <button onclick="toggleTheme()" class="switcher-btn" id="themeBtn">
                        ğŸŒ™
                    </button>

                    <a href="#" class="nav-link" data-ar="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" data-en="Home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                    <a href="#cities" class="nav-link" data-ar="Ø§Ù„Ù…Ø¯Ù†" data-en="Cities">Ø§Ù„Ù…Ø¯Ù†</a>
                    <a href="admin-final.html" class="nav-link" data-ar="Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©" data-en="Admin">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</a>
                    
                    <!-- Cart -->
                    <button onclick="openCart()" class="relative p-2 hover:bg-opacity-10 rounded-lg transition">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                        <span class="cart-badge" id="cartCount">0</span>
                    </button>
                </nav>
            </div>

            <!-- Mobile Search -->
            <div class="md:hidden pb-3">
                <input type="text" class="search-bar" 
                       placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø£Ùˆ Ø§Ù„Ù…Ù†ØªØ¬...">
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container mx-auto px-4">
            <h1 class="text-4xl md:text-6xl font-black mb-4" data-ar="ÙƒØ£Ù†Ùƒ ÙÙŠÙ‡Ø§" data-en="Kanak Feeha">
                ÙƒØ£Ù†Ùƒ <span style="color: var(--primary-yellow)">ÙÙŠÙ‡Ø§</span>
            </h1>
            <p class="text-lg md:text-xl mb-8" style="color: var(--gray-text);" 
               data-ar="Ù‡ÙˆØ¯ÙŠÙ‡Ø§Øª ÙÙ„Ø³Ø·ÙŠÙ†ÙŠØ© Ø£ØµÙŠÙ„Ø© - Ø¹Ø¨Ø± Ø¹Ù† Ø­Ø¨Ùƒ Ù„Ù…Ø¯ÙŠÙ†ØªÙƒ" 
               data-en="Authentic Palestinian Hoodies - Express Your Love for Your City">
                Ù‡ÙˆØ¯ÙŠÙ‡Ø§Øª ÙÙ„Ø³Ø·ÙŠÙ†ÙŠØ© Ø£ØµÙŠÙ„Ø© - Ø¹Ø¨Ø± Ø¹Ù† Ø­Ø¨Ùƒ Ù„Ù…Ø¯ÙŠÙ†ØªÙƒ
            </p>
            <button onclick="document.getElementById('cities').scrollIntoView({behavior: 'smooth'})" 
                    class="btn-yellow inline-block px-8 py-3"
                    data-ar="Ø§ÙƒØªØ´Ù Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©" data-en="Discover Collection">
                Ø§ÙƒØªØ´Ù Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
            </button>
        </div>
    </section>

    <!-- Cities & Products Section -->
    <section id="cities" class="container mx-auto px-4 py-12">
        <div id="citiesContainer">
            <!-- Cities will be loaded here dynamically -->
        </div>
    </section>

    <!-- Shopping Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold" data-ar="Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚" data-en="Shopping Cart">Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h3>
                    <button onclick="closeCart()" class="text-gray-500 hover:text-black">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <div id="cartItems" class="space-y-4 mb-6">
                    <!-- Cart items will be loaded here -->
                </div>
                
                <div class="border-t pt-6" style="border-color: var(--border-color)">
                    <div class="flex justify-between items-center mb-6 text-xl font-bold">
                        <span data-ar="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:" data-en="Total:">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                        <span id="cartTotal">$0.00</span>
                    </div>
                    <button onclick="proceedToCheckout()" class="btn-yellow w-full py-4 text-lg"
                            data-ar="Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡" data-en="Checkout">
                        Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Language & Theme Management
        let currentLang = localStorage.getItem('language') || 'ar';
        let currentTheme = localStorage.getItem('theme') || 'light';

        // Apply saved preferences
        document.documentElement.lang = currentLang;
        document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
        document.documentElement.setAttribute('data-theme', currentTheme);

        // Toggle Language
        function toggleLanguage() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            document.documentElement.lang = currentLang;
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            localStorage.setItem('language', currentLang);
            
            // Update all translatable elements
            document.querySelectorAll('[data-ar][data-en]').forEach(el => {
                el.textContent = currentLang === 'ar' ? el.dataset.ar : el.dataset.en;
            });
            
            // Update placeholders
            document.querySelectorAll('.search-bar').forEach(input => {
                input.placeholder = currentLang === 'ar' ? 
                    'Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø£Ùˆ Ø§Ù„Ù…Ù†ØªØ¬...' : 
                    'Search for city or product...';
            });
            
            // Update language button
            document.getElementById('langBtn').textContent = currentLang === 'ar' ? 'EN' : 'Ø¹';
            
            renderCities();
        }

        // Toggle Theme
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('theme', currentTheme);
            
            document.getElementById('themeBtn').textContent = currentTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }

        // Initialize theme button
        document.getElementById('themeBtn').textContent = currentTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';

        // Data Structure with translations
        let cities = [
            {
                id: 1,
                name: { ar: 'ØºØ²Ø©', en: 'Gaza' },
                products: [
                    {
                        id: 101,
                        name: { ar: 'Ù‡ÙˆØ¯ÙŠ ØºØ²Ø© Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ', en: 'Gaza Classic Hoodie' },
                        description: { ar: 'ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ ÙŠØ¹Ø¨Ø± Ø¹Ù† ØµÙ…ÙˆØ¯ ÙˆØ¬Ù…Ø§Ù„ ØºØ²Ø©', en: 'Modern design expressing Gaza\'s resilience and beauty' },
                        price: 49.99,
                        image: 'https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=500&h=500&fit=crop',
                        colors: ['#000000', '#FFFFFF', '#C8D400'],
                        sizes: ['S', 'M', 'L', 'XL', 'XXL'],
                        isPackage: true
                    },
                    {
                        id: 102,
                        name: { ar: 'Ù‡ÙˆØ¯ÙŠ ØºØ²Ø© Ø§Ù„Ø¹ØªÙŠÙ‚Ø©', en: 'Gaza Heritage Hoodie' },
                        description: { ar: 'ÙŠØ­Ù…Ù„ Ø±ÙˆØ­ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø£ØµØ§Ù„Ø©', en: 'Carries the spirit of history and authenticity' },
                        price: 54.99,
                        image: 'https://images.unsplash.com/photo-1578587018452-892bacefd3f2?w=500&h=500&fit=crop',
                        colors: ['#000000', '#8B4513', '#2F4F4F'],
                        sizes: ['S', 'M', 'L', 'XL', 'XXL'],
                        isPackage: true
                    },
                    {
                        id: 103,
                        name: { ar: 'Ù‡ÙˆØ¯ÙŠ ØºØ²Ø© Ø§Ù„Ù…ÙˆØ¯Ø±Ù†', en: 'Gaza Modern Hoodie' },
                        description: { ar: 'ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ ÙˆØ¬Ø±ÙŠØ¡', en: 'Contemporary and bold design' },
                        price: 52.99,
                        image: 'https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?w=500&h=500&fit=crop',
                        colors: ['#1E3A8A', '#DC2626', '#C8D400'],
                        sizes: ['S', 'M', 'L', 'XL'],
                        isPackage: true
                    }
                ]
            },
            {
                id: 2,
                name: { ar: 'Ø§Ù„Ù‚Ø¯Ø³', en: 'Jerusalem' },
                products: [
                    {
                        id: 201,
                        name: { ar: 'Ù‡ÙˆØ¯ÙŠ Ø§Ù„Ù‚Ø¯Ø³ Ø§Ù„ØªØ±Ø§Ø«ÙŠ', en: 'Jerusalem Heritage Hoodie' },
                        description: { ar: 'ÙŠØ­Ù…Ù„ Ø¹Ø¨Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ù‚Ø¯Ø³ÙŠØ©', en: 'Carries the fragrance of history and sanctity' },
                        price: 59.99,
                        image: 'https://images.unsplash.com/photo-1618354691373-d851c5c3a990?w=500&h=500&fit=crop',
                        colors: ['#DAA520', '#000000', '#FFFFFF'],
                        sizes: ['S', 'M', 'L', 'XL', 'XXL'],
                        isPackage: true
                    },
                    {
                        id: 202,
                        name: { ar: 'Ù‡ÙˆØ¯ÙŠ Ø§Ù„Ù‚Ø¯Ø³ Ø§Ù„Ù…Ù‚Ø¯Ø³Ø©', en: 'Jerusalem Sacred Hoodie' },
                        description: { ar: 'ØªØµÙ…ÙŠÙ… ÙŠÙ„ÙŠÙ‚ Ø¨Ø£ÙˆÙ„Ù‰ Ø§Ù„Ù‚Ø¨Ù„ØªÙŠÙ†', en: 'Design worthy of the first qibla' },
                        price: 64.99,
                        image: 'https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=500&h=500&fit=crop',
                        colors: ['#000000', '#C8D400', '#8B4513'],
                        sizes: ['S', 'M', 'L', 'XL', 'XXL'],
                        isPackage: true
                    },
                    {
                        id: 203,
                        name: { ar: 'Ù‡ÙˆØ¯ÙŠ Ø§Ù„Ù‚Ø¯Ø³ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©', en: 'Jerusalem Golden Hoodie' },
                        description: { ar: 'ÙƒÙ‚Ø¨Ø© Ø§Ù„ØµØ®Ø±Ø© ÙÙŠ Ø¬Ù…Ø§Ù„Ù‡Ø§', en: 'Like the Dome of the Rock in its beauty' },
                        price: 69.99,
                        image: 'https://images.unsplash.com/photo-1620799139652-715e4d5b232d?w=500&h=500&fit=crop',
                        colors: ['#DAA520', '#1E3A8A', '#FFFFFF'],
                        sizes: ['M', 'L', 'XL', 'XXL'],
                        isPackage: true
                    },
                    {
                        id: 204,
                        name: { ar: 'Ù‡ÙˆØ¯ÙŠ Ø§Ù„Ù‚Ø¯Ø³ Ø§Ù„Ø¹Ø±ÙŠÙ‚Ø©', en: 'Jerusalem Ancient Hoodie' },
                        description: { ar: 'Ø¹Ø±Ø§Ù‚Ø© ÙˆØ£ØµØ§Ù„Ø© Ù„Ø§ ØªÙ†ØªÙ‡ÙŠ', en: 'Endless heritage and authenticity' },
                        price: 62.99,
                        image: 'https://images.unsplash.com/photo-1578587018452-892bacefd3f2?w=500&h=500&fit=crop',
                        colors: ['#8B4513', '#000000', '#C8D400'],
                        sizes: ['S', 'M', 'L', 'XL', 'XXL'],
                        isPackage: true
                    }
                ]
            },
            {
                id: 3,
                name: { ar: 'Ø§Ù„Ø®Ù„ÙŠÙ„', en: 'Hebron' },
                products: [
                    {
                        id: 301,
                        name: { ar: 'Ù‡ÙˆØ¯ÙŠ Ø§Ù„Ø®Ù„ÙŠÙ„ Ø§Ù„Ø£ØµÙŠÙ„', en: 'Hebron Authentic Hoodie' },
                        description: { ar: 'ÙŠØ¹ÙƒØ³ Ø¹Ø±Ø§Ù‚Ø© Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø®Ù„ÙŠÙ„', en: 'Reflects Hebron\'s ancient heritage' },
                        price: 54.99,
                        image: 'https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?w=500&h=500&fit=crop',
                        colors: ['#000000', '#8B4513', '#FFFFFF'],
                        sizes: ['S', 'M', 'L', 'XL', 'XXL'],
                        isPackage: true
                    },
                    {
                        id: 302,
                        name: { ar: 'Ù‡ÙˆØ¯ÙŠ Ø§Ù„Ø®Ù„ÙŠÙ„ Ø§Ù„ØªØ±Ø§Ø«ÙŠ', en: 'Hebron Heritage Hoodie' },
                        description: { ar: 'ØªØ±Ø§Ø« ÙˆØªØ§Ø±ÙŠØ® ÙÙŠ Ù‚Ø·Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©', en: 'Heritage and history in one piece' },
                        price: 57.99,
                        image: 'https://images.unsplash.com/photo-1618354691373-d851c5c3a990?w=500&h=500&fit=crop',
                        colors: ['#2F4F4F', '#C8D400', '#000000'],
                        sizes: ['S', 'M', 'L', 'XL'],
                        isPackage: true
                    }
                ]
            }
        ];

        // Load from localStorage if exists
        const savedCities = localStorage.getItem('cities');
        if (savedCities) {
            cities = JSON.parse(savedCities);
        } else {
            localStorage.setItem('cities', JSON.stringify(cities));
        }

        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currency = JSON.parse(localStorage.getItem('currency')) || { symbol: '$', rate: 1 };

        // Render Cities and Products
        function renderCities() {
            const container = document.getElementById('citiesContainer');
            
            if (cities.length === 0) {
                container.innerHTML = `<p class="text-center py-12" style="color: var(--gray-text)">
                    ${currentLang === 'ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¯Ù† Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹' : 'No cities available currently'}
                </p>`;
                return;
            }

            container.innerHTML = cities.map(city => `
                <div class="city-section">
                    <h2 class="city-title">${city.name[currentLang] || city.name.ar}</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        ${city.products.map(product => {
                            const pName = product.name[currentLang] || product.name.ar || product.name;
                            const pDesc = product.description[currentLang] || product.description.ar || product.description;
                            const packageText = currentLang === 'ar' ? 'Ø¨ÙƒØ¬ ÙƒØ§Ù…Ù„ ğŸ“¦' : 'Full Package ğŸ“¦';
                            const addToCartText = currentLang === 'ar' ? 'Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©' : 'Add to Cart';
                            
                            return `
                            <div class="product-card">
                                <div class="relative">
                                    ${product.isPackage ? `<div class="package-badge">${packageText}</div>` : ''}
                                    <img src="${product.image}" alt="${pName}" class="product-image">
                                </div>
                                <div class="product-info">
                                    <h3 class="product-name">${pName}</h3>
                                    <p class="product-desc">${pDesc}</p>
                                    
                                    <div class="flex gap-2 mb-3">
                                        ${product.colors.map((color, index) => `
                                            <button class="color-btn ${index === 0 ? 'active' : ''}" 
                                                    style="background: ${color}"
                                                    onclick="selectColor(${product.id}, '${color}', this)"
                                                    data-color="${color}">
                                            </button>
                                        `).join('')}
                                    </div>
                                    
                                    <div class="flex flex-wrap gap-2 mb-3" id="sizes-${product.id}">
                                        ${product.sizes.map((size, index) => `
                                            <button class="size-btn ${index === 0 ? 'active' : ''}" 
                                                    onclick="selectSize(${product.id}, '${size}', this)">
                                                ${size}
                                            </button>
                                        `).join('')}
                                    </div>
                                    
                                    <div class="text-xl font-bold mb-3">${currency.symbol}${(product.price * currency.rate).toFixed(2)}</div>
                                    <button onclick="addToCart(${city.id}, ${product.id})" class="btn-yellow">
                                        ${addToCartText}
                                    </button>
                                </div>
                            </div>
                        `}).join('')}
                    </div>
                </div>
            `).join('');
        }

        function selectColor(productId, color, btn) {
            const colorButtons = btn.parentElement.querySelectorAll('.color-btn');
            colorButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function selectSize(productId, size, btn) {
            const sizeButtons = btn.parentElement.querySelectorAll('.size-btn');
            sizeButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function addToCart(cityId, productId) {
            const city = cities.find(c => c.id === cityId);
            const product = city.products.find(p => p.id === productId);
            
            const colorBtn = document.querySelector(`[onclick*="selectColor(${productId}"]`).parentElement.querySelector('.color-btn.active');
            const sizeBtn = document.querySelector(`#sizes-${productId} .size-btn.active`);
            
            const selectedColor = colorBtn.dataset.color;
            const selectedSize = sizeBtn.textContent.trim();
            
            const cartItem = {
                ...product,
                cityName: city.name,
                selectedColor,
                selectedSize,
                quantity: 1
            };
            
            const existingItem = cart.find(item => 
                item.id === productId && 
                item.selectedColor === selectedColor && 
                item.selectedSize === selectedSize
            );
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push(cartItem);
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
            alert(currentLang === 'ar' ? 'âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©!' : 'âœ… Added to cart!');
        }

        function updateCartDisplay() {
            const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = cartCount;
            
            const cartItems = document.getElementById('cartItems');
            const emptyText = currentLang === 'ar' ? 'Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©' : 'Cart is empty';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `<p class="text-center py-8" style="color: var(--gray-text)">${emptyText}</p>`;
            } else {
                cartItems.innerHTML = cart.map(item => {
                    const cityName = item.cityName[currentLang] || item.cityName.ar || item.cityName;
                    const productName = item.name[currentLang] || item.name.ar || item.name;
                    
                    return `
                    <div class="flex gap-4 border-b pb-4" style="border-color: var(--border-color)">
                        <img src="${item.image}" alt="${productName}" class="w-20 h-20 rounded object-cover">
                        <div class="flex-1">
                            <h4 class="font-bold text-sm">${productName}</h4>
                            <p class="text-xs" style="color: var(--gray-text)">${cityName}</p>
                            <p class="text-xs">
                                ${currentLang === 'ar' ? 'Ø§Ù„Ù„ÙˆÙ†:' : 'Color:'} 
                                <span class="inline-block w-4 h-4 rounded-full" style="background: ${item.selectedColor}"></span>
                            </p>
                            <p class="text-xs">${currentLang === 'ar' ? 'Ø§Ù„Ù…Ù‚Ø§Ø³:' : 'Size:'} ${item.selectedSize}</p>
                            <div class="flex items-center gap-2 mt-2">
                                <button onclick="changeQuantity(${item.id}, '${item.selectedColor}', '${item.selectedSize}', -1)" 
                                        class="w-6 h-6 rounded font-bold text-sm" style="background: var(--gray-bg)">-</button>
                                <span class="text-sm font-bold">${item.quantity}</span>
                                <button onclick="changeQuantity(${item.id}, '${item.selectedColor}', '${item.selectedSize}', 1)" 
                                        class="w-6 h-6 rounded font-bold text-sm" style="background: var(--gray-bg)">+</button>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-sm">${currency.symbol}${(item.price * item.quantity * currency.rate).toFixed(2)}</p>
                            <button onclick="removeFromCart(${item.id}, '${item.selectedColor}', '${item.selectedSize}')" 
                                    class="text-red-500 text-xs mt-2">${currentLang === 'ar' ? 'Ø­Ø°Ù' : 'Delete'}</button>
                        </div>
                    </div>
                `}).join('');
            }
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('cartTotal').textContent = `${currency.symbol}${(total * currency.rate).toFixed(2)}`;
        }

        function changeQuantity(productId, color, size, change) {
            const item = cart.find(i => i.id === productId && i.selectedColor === color && i.selectedSize === size);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId, color, size);
                } else {
                    localStorage.setItem('cart', JSON.stringify(cart));
                    updateCartDisplay();
                }
            }
        }

        function removeFromCart(productId, color, size) {
            cart = cart.filter(item => !(item.id === productId && item.selectedColor === color && item.selectedSize === size));
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }

        function openCart() {
            document.getElementById('cartModal').classList.add('active');
        }

        function closeCart() {
            document.getElementById('cartModal').classList.remove('active');
        }

        function proceedToCheckout() {
            if (cart.length === 0) {
                alert(currentLang === 'ar' ? 'Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!' : 'Cart is empty!');
                return;
            }
            window.location.href = 'checkout-final.html';
        }

        // Search Functionality
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const cityElements = document.querySelectorAll('.city-section');
            
            cityElements.forEach(cityEl => {
                const cityName = cityEl.querySelector('.city-title').textContent.toLowerCase();
                const products = cityEl.querySelectorAll('.product-name');
                let hasMatch = cityName.includes(searchTerm);
                
                products.forEach(product => {
                    if (product.textContent.toLowerCase().includes(searchTerm)) {
                        hasMatch = true;
                    }
                });
                
                cityEl.style.display = hasMatch ? 'block' : 'none';
            });
        });

        // Initialize
        renderCities();
        updateCartDisplay();
    </script>
</body>
</html>
