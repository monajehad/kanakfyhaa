<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ - Ù…ØªØ¬Ø± Ø§Ù„Ù‡ÙˆØ¯ÙŠÙ‡Ø§Øª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=USD"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Tajawal', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
        }

        .glass {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.3);
        }

        .input-field {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 14px 20px;
            border-radius: 15px;
            width: 100%;
            transition: all 0.3s;
            font-weight: 500;
        }

        .input-field:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.6);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
        }

        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        label {
            color: white;
            font-weight: 600;
            display: block;
            margin-bottom: 8px;
            font-size: 1.05rem;
        }

        .required::after {
            content: ' *';
            color: #ff6b6b;
        }

        select.input-field {
            cursor: pointer;
        }

        select.input-field option {
            background: #764ba2;
            color: white;
            padding: 10px;
        }

        .glow-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 32px;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            font-size: 1.1rem;
        }

        .glow-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .glow-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .order-summary {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 24px;
        }

        .error-message {
            background: rgba(255, 107, 107, 0.2);
            border: 2px solid rgba(255, 107, 107, 0.5);
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <!-- Header -->
    <header class="glass rounded-3xl mb-8">
        <div class="flex items-center justify-between p-4">
            <a href="index.html" class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-xl shadow-lg">
                    H
                </div>
                <span class="text-white font-bold text-xl">Ù…ØªØ¬Ø± Ø§Ù„Ù‡ÙˆØ¯ÙŠÙ‡Ø§Øª</span>
            </a>
            <a href="index.html" class="text-white hover:text-purple-200 transition font-medium">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ØªØ¬Ø±</a>
        </div>
    </header>

    <div class="max-w-6xl mx-auto">
        <h1 class="text-5xl font-bold text-white text-center mb-12">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h1>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Billing Form -->
            <div class="glass rounded-3xl p-8">
                <h2 class="text-3xl font-bold text-white mb-6">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø­Ù†</h2>
                
                <form id="checkoutForm" class="space-y-6">
                    <!-- Full Name -->
                    <div>
                        <label class="required">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                        <input type="text" id="fullName" class="input-field" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" required>
                        <div class="error-message" id="nameError">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</div>
                    </div>

                    <!-- Email -->
                    <div>
                        <label class="required">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="email" class="input-field" placeholder="example@email.com" required>
                        <div class="error-message" id="emailError">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­</div>
                    </div>

                    <!-- Phone -->
                    <div>
                        <label class="required">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                        <input type="tel" id="phone" class="input-field" placeholder="+970 599 123 456" required>
                        <div class="error-message" id="phoneError">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­</div>
                    </div>

                    <!-- Country -->
                    <div>
                        <label class="required">Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
                        <select id="country" class="input-field" required>
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©</option>
                            <option value="PS">ÙÙ„Ø³Ø·ÙŠÙ†</option>
                            <option value="JO">Ø§Ù„Ø£Ø±Ø¯Ù†</option>
                            <option value="SA">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
                            <option value="AE">Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</option>
                            <option value="EG">Ù…ØµØ±</option>
                            <option value="LB">Ù„Ø¨Ù†Ø§Ù†</option>
                            <option value="SY">Ø³ÙˆØ±ÙŠØ§</option>
                            <option value="IQ">Ø§Ù„Ø¹Ø±Ø§Ù‚</option>
                            <option value="KW">Ø§Ù„ÙƒÙˆÙŠØª</option>
                            <option value="QA">Ù‚Ø·Ø±</option>
                            <option value="BH">Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option>
                            <option value="OM">Ø¹Ù…Ø§Ù†</option>
                            <option value="YE">Ø§Ù„ÙŠÙ…Ù†</option>
                            <option value="MA">Ø§Ù„Ù…ØºØ±Ø¨</option>
                            <option value="DZ">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option>
                            <option value="TN">ØªÙˆÙ†Ø³</option>
                            <option value="LY">Ù„ÙŠØ¨ÙŠØ§</option>
                            <option value="SD">Ø§Ù„Ø³ÙˆØ¯Ø§Ù†</option>
                            <option value="US">Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©</option>
                            <option value="GB">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©</option>
                            <option value="FR">ÙØ±Ù†Ø³Ø§</option>
                            <option value="DE">Ø£Ù„Ù…Ø§Ù†ÙŠØ§</option>
                            <option value="IT">Ø¥ÙŠØ·Ø§Ù„ÙŠØ§</option>
                            <option value="ES">Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§</option>
                            <option value="TR">ØªØ±ÙƒÙŠØ§</option>
                            <option value="CA">ÙƒÙ†Ø¯Ø§</option>
                            <option value="AU">Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§</option>
                            <option value="NL">Ù‡ÙˆÙ„Ù†Ø¯Ø§</option>
                            <option value="SE">Ø§Ù„Ø³ÙˆÙŠØ¯</option>
                            <option value="NO">Ø§Ù„Ù†Ø±ÙˆÙŠØ¬</option>
                            <option value="DK">Ø§Ù„Ø¯Ù†Ù…Ø§Ø±Ùƒ</option>
                            <option value="FI">ÙÙ†Ù„Ù†Ø¯Ø§</option>
                            <option value="CH">Ø³ÙˆÙŠØ³Ø±Ø§</option>
                            <option value="AT">Ø§Ù„Ù†Ù…Ø³Ø§</option>
                            <option value="BE">Ø¨Ù„Ø¬ÙŠÙƒØ§</option>
                            <option value="PL">Ø¨ÙˆÙ„Ù†Ø¯Ø§</option>
                            <option value="CZ">Ø§Ù„ØªØ´ÙŠÙƒ</option>
                            <option value="HU">Ø§Ù„Ù…Ø¬Ø±</option>
                            <option value="RO">Ø±ÙˆÙ…Ø§Ù†ÙŠØ§</option>
                            <option value="BG">Ø¨Ù„ØºØ§Ø±ÙŠØ§</option>
                            <option value="GR">Ø§Ù„ÙŠÙˆÙ†Ø§Ù†</option>
                            <option value="PT">Ø§Ù„Ø¨Ø±ØªØºØ§Ù„</option>
                            <option value="IE">Ø£ÙŠØ±Ù„Ù†Ø¯Ø§</option>
                            <option value="JP">Ø§Ù„ÙŠØ§Ø¨Ø§Ù†</option>
                            <option value="KR">ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©</option>
                            <option value="CN">Ø§Ù„ØµÙŠÙ†</option>
                            <option value="IN">Ø§Ù„Ù‡Ù†Ø¯</option>
                            <option value="MY">Ù…Ø§Ù„ÙŠØ²ÙŠØ§</option>
                            <option value="SG">Ø³Ù†ØºØ§ÙÙˆØ±Ø©</option>
                            <option value="TH">ØªØ§ÙŠÙ„Ø§Ù†Ø¯</option>
                            <option value="ID">Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§</option>
                            <option value="PH">Ø§Ù„ÙÙ„Ø¨ÙŠÙ†</option>
                            <option value="VN">ÙÙŠØªÙ†Ø§Ù…</option>
                            <option value="NZ">Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§</option>
                            <option value="ZA">Ø¬Ù†ÙˆØ¨ Ø£ÙØ±ÙŠÙ‚ÙŠØ§</option>
                            <option value="BR">Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„</option>
                            <option value="MX">Ø§Ù„Ù…ÙƒØ³ÙŠÙƒ</option>
                            <option value="AR">Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†</option>
                            <option value="CL">ØªØ´ÙŠÙ„ÙŠ</option>
                            <option value="CO">ÙƒÙˆÙ„ÙˆÙ…Ø¨ÙŠØ§</option>
                        </select>
                        <div class="error-message" id="countryError">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø©</div>
                    </div>

                    <!-- City -->
                    <div>
                        <label class="required">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label>
                        <input type="text" id="city" class="input-field" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©" required>
                        <div class="error-message" id="cityError">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</div>
                    </div>

                    <!-- Address -->
                    <div>
                        <label class="required">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ</label>
                        <textarea id="address" class="input-field" rows="3" placeholder="Ø§Ù„Ø´Ø§Ø±Ø¹ØŒ Ø±Ù‚Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰ØŒ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©..." required></textarea>
                        <div class="error-message" id="addressError">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ</div>
                    </div>

                    <!-- Postal Code -->
                    <div>
                        <label>Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                        <input type="text" id="postalCode" class="input-field" placeholder="12345">
                    </div>

                    <!-- Additional Notes -->
                    <div>
                        <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                        <textarea id="notes" class="input-field" rows="2" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø·Ù„Ø¨..."></textarea>
                    </div>
                </form>
            </div>

            <!-- Order Summary -->
            <div>
                <div class="glass rounded-3xl p-8 mb-6">
                    <h2 class="text-3xl font-bold text-white mb-6">Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</h2>
                    
                    <div id="orderItems" class="space-y-4 mb-6">
                        <!-- Order items will be loaded here -->
                    </div>

                    <div class="border-t border-white/20 pt-6 space-y-3">
                        <div class="flex justify-between text-white text-lg">
                            <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>
                            <span id="subtotal" class="font-bold">$0.00</span>
                        </div>
                        <div class="flex justify-between text-white text-lg">
                            <span>Ø§Ù„Ø´Ø­Ù†:</span>
                            <span id="shipping" class="font-bold">$10.00</span>
                        </div>
                        <div class="flex justify-between text-white text-2xl font-bold border-t border-white/20 pt-3">
                            <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                            <span id="total">$0.00</span>
                        </div>
                    </div>
                </div>

                <!-- Payment Section -->
                <div class="glass rounded-3xl p-8">
                    <h2 class="text-2xl font-bold text-white mb-6">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</h2>
                    
                    <div class="space-y-4 mb-6">
                        <label class="flex items-center gap-3 cursor-pointer">
                            <input type="radio" name="payment" value="paypal" checked class="w-5 h-5">
                            <span class="text-white font-medium text-lg">PayPal</span>
                            <img src="https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_37x23.jpg" alt="PayPal" class="h-6">
                        </label>
                    </div>

                    <!-- PayPal Button Container -->
                    <div id="paypal-button-container" class="hidden mb-4"></div>

                    <button type="button" id="placeOrderBtn" onclick="validateAndPay()" class="w-full glow-button">
                        Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¢Ù†
                    </button>

                    <p class="text-white/70 text-sm text-center mt-4">
                        ğŸ”’ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¢Ù…Ù†Ø© ÙˆÙ…Ø´ÙØ±Ø©
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currency = JSON.parse(localStorage.getItem('currency')) || { symbol: '$', rate: 1 };
        const SHIPPING_COST = 10;

        // Load Order Items
        function loadOrderItems() {
            const orderItemsContainer = document.getElementById('orderItems');
            
            if (cart.length === 0) {
                window.location.href = 'index.html';
                return;
            }

            orderItemsContainer.innerHTML = cart.map(item => `
                <div class="flex gap-4 bg-white/10 rounded-xl p-4">
                    <img src="${item.image}" alt="${item.name}" class="w-20 h-20 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="text-white font-bold">${item.name}</h4>
                        <p class="text-white/70 text-sm">Ø§Ù„Ù…Ù‚Ø§Ø³: ${item.selectedSize}</p>
                        <p class="text-white/70 text-sm">Ø§Ù„ÙƒÙ…ÙŠØ©: ${item.quantity}</p>
                    </div>
                    <div class="text-white font-bold">
                        ${currency.symbol}${(item.price * item.quantity * currency.rate).toFixed(2)}
                    </div>
                </div>
            `).join('');

            updateTotals();
        }

        // Update Totals
        function updateTotals() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = SHIPPING_COST;
            const total = subtotal + shipping;

            document.getElementById('subtotal').textContent = 
                `${currency.symbol}${(subtotal * currency.rate).toFixed(2)}`;
            document.getElementById('shipping').textContent = 
                `${currency.symbol}${(shipping * currency.rate).toFixed(2)}`;
            document.getElementById('total').textContent = 
                `${currency.symbol}${(total * currency.rate).toFixed(2)}`;
        }

        // Validate Form
        function validateForm() {
            let isValid = true;
            const fields = [
                { id: 'fullName', error: 'nameError', message: 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„' },
                { id: 'email', error: 'emailError', message: 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­' },
                { id: 'phone', error: 'phoneError', message: 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­' },
                { id: 'country', error: 'countryError', message: 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø©' },
                { id: 'city', error: 'cityError', message: 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©' },
                { id: 'address', error: 'addressError', message: 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ' }
            ];

            fields.forEach(field => {
                const input = document.getElementById(field.id);
                const errorDiv = document.getElementById(field.error);
                
                if (!input.value.trim()) {
                    errorDiv.style.display = 'block';
                    errorDiv.textContent = field.message;
                    isValid = false;
                } else {
                    errorDiv.style.display = 'none';
                }
            });

            // Email validation
            const emailInput = document.getElementById('email');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailInput.value && !emailRegex.test(emailInput.value)) {
                document.getElementById('emailError').style.display = 'block';
                document.getElementById('emailError').textContent = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­';
                isValid = false;
            }

            return isValid;
        }

        // Validate and Show PayPal
        function validateAndPay() {
            if (!validateForm()) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }

            // Show PayPal button
            document.getElementById('paypal-button-container').classList.remove('hidden');
            document.getElementById('placeOrderBtn').disabled = true;
            document.getElementById('placeOrderBtn').textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ PayPal...';

            // Initialize PayPal
            initializePayPal();
        }

        // Initialize PayPal
        function initializePayPal() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = (subtotal + SHIPPING_COST).toFixed(2);

            paypal.Buttons({
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: total,
                                currency_code: 'USD'
                            },
                            description: 'Ø·Ù„Ø¨ Ù…Ù† Ù…ØªØ¬Ø± Ø§Ù„Ù‡ÙˆØ¯ÙŠÙ‡Ø§Øª'
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        // Collect order data
                        const orderData = {
                            orderId: 'ORD-' + Date.now(),
                            customerName: document.getElementById('fullName').value,
                            email: document.getElementById('email').value,
                            phone: document.getElementById('phone').value,
                            country: document.getElementById('country').value,
                            city: document.getElementById('city').value,
                            address: document.getElementById('address').value,
                            postalCode: document.getElementById('postalCode').value,
                            notes: document.getElementById('notes').value,
                            items: cart,
                            subtotal: subtotal,
                            shipping: SHIPPING_COST,
                            total: parseFloat(total),
                            currency: currency,
                            paymentMethod: 'PayPal',
                            paymentStatus: 'Paid',
                            orderStatus: 'Processing',
                            transactionId: details.id,
                            payerEmail: details.payer.email_address,
                            orderDate: new Date().toISOString()
                        };

                        // Save order to localStorage (in real app, send to server)
                        let orders = JSON.parse(localStorage.getItem('orders')) || [];
                        orders.push(orderData);
                        localStorage.setItem('orders', JSON.stringify(orders));

                        // Clear cart
                        localStorage.removeItem('cart');

                        // Redirect to success page
                        window.location.href = 'order-success.html?orderId=' + orderData.orderId;
                    });
                },
                onError: function(err) {
                    console.error('PayPal Error:', err);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                    document.getElementById('placeOrderBtn').disabled = false;
                    document.getElementById('placeOrderBtn').textContent = 'Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¢Ù†';
                }
            }).render('#paypal-button-container');
        }

        // Initialize
        loadOrderItems();
    </script>
</body>
</html>
